const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-4826CZ7b.js","assets/whisper-add-friend-B4hcy87Q.js","assets/naive-ui-1pzJR9kY.js","assets/seemly-96Y8tuX4.js","assets/@vue-CT9fXtKS.js","assets/vueuc-rMdi6pp7.js","assets/evtd-CI_DDEu_.js","assets/@css-render-D-71Ub-V.js","assets/vooks-D483k878.js","assets/vdirs-Bxp-63WN.js","assets/@juggle-DY95s5UV.js","assets/css-render-wuhQizsj.js","assets/@emotion-WldOFDRm.js","assets/lodash-es-BI2Xm8S2.js","assets/treemate-N4GG0L_2.js","assets/async-validator-P8scd9xB.js","assets/date-fns-Db9XENWt.js","assets/whisper-add-friend-C7nzJlGG.css","assets/whisper-C90jedry.js","assets/whisper-CxECGYE1.css","assets/post-item.vue_vue_type_style_index_0_lang-BMgNyw45.js","assets/content-Doz2tKZo.js","assets/@vicons-BcP-CCNH.js","assets/paopao-video-player-DJIg2Ep1.js","assets/content-BEAgLL5B.css","assets/vuex-BtQJPySv.js","assets/vue-router-Oso6ZnuY.js","assets/copy-to-clipboard-DgsYVcxl.js","assets/toggle-selection-DGa8lynz.js","assets/post-item-CiouHqhK.css","assets/post-skeleton-DOs8Pbo8.js","assets/post-skeleton-DtiTm5JG.css","assets/lodash-CGvuAYz8.js","assets/IEnum-B3rDUvtK.js","assets/main-nav.vue_vue_type_style_index_0_lang-tx84Ctyj.js","assets/main-nav-DkRZ0XqZ.css","assets/v3-infinite-loading-DLisiGa3.js","assets/v3-infinite-loading-C33VokCe.css","assets/@opentiny-Brt0WuG3.js","assets/vue-BAiMcOs2.js","assets/@opentiny-BDqeqNoT.css","assets/axios-upsvKRUO.js","assets/moment-P60zs0je.js","assets/Home-6WuUxluX.css","assets/vfonts-Bnl8eXTc.css","assets/Post-DMtlT6Cg.js","assets/Post-CppCIvfc.css","assets/Topic-Ci6XOjt-.js","assets/Topic-Dk7qWh97.css","assets/Anouncement-D_HEXlof.js","assets/Anouncement-DBcpQaHQ.css","assets/Profile-7MWVx1eF.js","assets/count-BK58UQ2M.js","assets/Profile-DdmCVl1_.css","assets/User-D0PBPd77.js","assets/User-DlRmS904.css","assets/Messages-DC75FJtn.js","assets/Messages-ByQEfKKw.css","assets/Collection-Dd8kb-zw.js","assets/Collection-CjoOEYyd.css","assets/Contacts-D9pLmSyO.js","assets/Contacts-BHvHu1HY.css","assets/Following-dY_FSoo8.js","assets/Following-XPfMtEVy.css","assets/Wallet-BPrLbSgf.js","assets/qrcode-CFCLo2rZ.js","assets/dijkstrajs-C00ieaqj.js","assets/Wallet-D2b31y6W.css","assets/Setting-BHC9DSTc.js","assets/Setting-F1hZZqDf.css","assets/404-gN5ZNpZP.js","assets/404-BFAjwVrS.css"])))=>i.map(i=>d[i]);
import{d as F,r as P,U as X,b as V,f as _,t as z,w as u,k as y,q as n,bq as d,j as C,G as I,_ as q,A as N,Z as S,c as G,C as j,l as ue,F as ee,x as te,z as R,h as T,a9 as we,u as oe,s as ve,am as ye}from"./@vue-CT9fXtKS.js";import{c as be,a as ke,u as ce,b as Le}from"./vue-router-Oso6ZnuY.js";import{c as Te,u as W}from"./vuex-BtQJPySv.js";import{a as Pe}from"./axios-upsvKRUO.js";import{_ as Ae,N as Me,a as pe,b as de,c as Re,d as Ce,B as me,e as Ee,f as Oe,g as he,h as Se,i as K,j as Ie,u as Ue,k as $e,l as De,m as xe,n as qe,o as Ne,p as ze,q as Ke,r as Fe,s as Ve}from"./naive-ui-1pzJR9kY.js";import{h as U}from"./moment-P60zs0je.js";import{S as We,M as Be,L as He,C as Ye,B as je,P as Ge,W as Qe,a as Ze,H as re,b as se,c as ne}from"./@vicons-BcP-CCNH.js";/* empty css               */import"./seemly-96Y8tuX4.js";import"./vueuc-rMdi6pp7.js";import"./evtd-CI_DDEu_.js";import"./@css-render-D-71Ub-V.js";import"./vooks-D483k878.js";import"./vdirs-Bxp-63WN.js";import"./@juggle-DY95s5UV.js";import"./css-render-wuhQizsj.js";import"./@emotion-WldOFDRm.js";import"./lodash-es-BI2Xm8S2.js";import"./treemate-N4GG0L_2.js";import"./async-validator-P8scd9xB.js";import"./date-fns-Db9XENWt.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))g(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&g(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function g(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}})();const Je="modulepreload",Xe=function(e){return"/"+e},ae={},M=function(t,r,g){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),v=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(f=>{if(f=Xe(f),f in ae)return;ae[f]=!0;const L=f.endsWith(".css"),w=L?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${w}`))return;const s=document.createElement("link");if(s.rel=L?"stylesheet":Je,L||(s.as="script"),s.crossOrigin="",s.href=f,v&&s.setAttribute("nonce",v),document.head.appendChild(s),L)return new Promise((A,m)=>{s.addEventListener("load",A),s.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${f}`)))})}))}function c(i){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=i,window.dispatchEvent(v),!v.defaultPrevented)throw i}return a.then(i=>{for(const v of i||[])v.status==="rejected"&&c(v.reason);return t().catch(c)})},et=[{path:"/",name:"home",meta:{title:"广场",keepAlive:!0},component:()=>M(()=>import("./Home-4826CZ7b.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44]))},{path:"/post",name:"post",meta:{title:"泡泡详情"},component:()=>M(()=>import("./Post-DMtlT6Cg.js"),__vite__mapDeps([45,4,25,33,22,2,3,5,6,7,8,9,10,11,12,13,14,15,16,21,23,24,26,30,31,32,27,28,18,19,34,35,36,37,41,42,46,44]))},{path:"/topic",name:"topic",meta:{title:"话题"},component:()=>M(()=>import("./Topic-Ci6XOjt-.js"),__vite__mapDeps([47,22,4,2,3,5,6,7,8,9,10,11,12,13,14,15,16,34,25,26,35,41,42,48,44]))},{path:"/anouncement",name:"anouncement",meta:{title:"公告"},component:()=>M(()=>import("./Anouncement-D_HEXlof.js"),__vite__mapDeps([49,30,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,31,34,25,26,22,35,41,42,50,44]))},{path:"/profile",name:"profile",meta:{title:"主页"},component:()=>M(()=>import("./Profile-7MWVx1eF.js"),__vite__mapDeps([51,18,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,19,20,21,22,23,24,25,26,27,28,29,30,31,34,35,52,36,37,41,42,53,44]))},{path:"/u",name:"user",meta:{title:"用户详情"},component:()=>M(()=>import("./User-D0PBPd77.js"),__vite__mapDeps([54,20,21,4,22,2,3,5,6,7,8,9,10,11,12,13,14,15,16,23,24,25,26,27,28,29,30,31,18,19,34,35,1,17,52,36,37,41,42,55,44]))},{path:"/messages",name:"messages",meta:{title:"消息"},component:()=>M(()=>import("./Messages-DC75FJtn.js"),__vite__mapDeps([56,4,25,26,22,2,3,5,6,7,8,9,10,11,12,13,14,15,16,18,19,34,35,36,37,41,42,57,44]))},{path:"/collection",name:"collection",meta:{title:"收藏"},component:()=>M(()=>import("./Collection-Dd8kb-zw.js"),__vite__mapDeps([58,18,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,19,20,21,22,23,24,25,26,27,28,29,30,31,34,35,36,37,41,42,59,44]))},{path:"/contacts",name:"contacts",meta:{title:"好友"},component:()=>M(()=>import("./Contacts-D9pLmSyO.js"),__vite__mapDeps([60,18,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,19,22,30,31,34,25,26,35,36,37,41,42,61,44]))},{path:"/following",name:"following",meta:{title:"关注"},component:()=>M(()=>import("./Following-dY_FSoo8.js"),__vite__mapDeps([62,18,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,19,22,30,31,34,25,26,35,36,37,41,42,63,44]))},{path:"/wallet",name:"wallet",meta:{title:"钱包"},component:()=>M(()=>import("./Wallet-BPrLbSgf.js"),__vite__mapDeps([64,30,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,31,34,25,26,22,35,65,27,28,66,41,42,67,44]))},{path:"/setting",name:"setting",meta:{title:"设置"},component:()=>M(()=>import("./Setting-BHC9DSTc.js"),__vite__mapDeps([68,34,25,4,26,8,6,22,2,3,5,7,9,10,11,12,13,14,15,16,35,41,42,69,44]))},{path:"/404",name:"404",meta:{title:"404"},component:()=>M(()=>import("./404-gN5ZNpZP.js"),__vite__mapDeps([70,34,25,4,26,8,6,22,2,3,5,7,9,10,11,12,13,14,15,16,35,41,42,71,44]))},{path:"/:pathMatch(.*)",redirect:"/404"}],fe=be({history:ke(),routes:et});fe.beforeEach((e,t,r)=>{document.title=`${e.meta.title} | 泡泡 - 一个清新文艺的微社区`,r()});const tt=Te({state:{refresh:Date.now(),refreshTopicFollow:Date.now(),theme:localStorage.getItem("PAOPAO_THEME"),collapsedLeft:document.body.clientWidth<=821,collapsedRight:document.body.clientWidth<=821,drawerModelShow:document.body.clientWidth<=821,desktopModelShow:document.body.clientWidth>821,authModalShow:!1,authModelTab:"signin",unreadMsgCount:0,userLogined:!1,userInfo:{id:0,username:"",nickname:"",created_on:0,follows:0,followings:0,tweets_count:0,is_admin:!1},profile:{useFriendship:!0,enableTrendsBar:!0,enableWallet:!1,allowTweetAttachment:!0,allowTweetAttachmentPrice:!0,allowTweetVideo:!0,allowUserRegister:!0,allowPhoneBind:!0,defaultTweetMaxLength:2e3,tweetWebEllipsisSize:400,tweetMobileEllipsisSize:300,defaultTweetVisibility:"friend",defaultMsgLoopInterval:5e3,copyrightTop:"2023 paopao.info",copyrightLeft:"Roc's Me",copyrightLeftLink:"",copyrightRight:"泡泡(PaoPao)开源社区",copyrightRightLink:"https://www.paopao.info"}},mutations:{refresh(e,t){e.refresh=t||Date.now()},refreshTopicFollow(e){e.refreshTopicFollow=Date.now()},updateUnreadMsgCount(e,t){e.unreadMsgCount=t},triggerTheme(e,t){e.theme=t},triggerAuth(e,t){e.authModalShow=t},triggerAuthKey(e,t){e.authModelTab=t},triggerCollapsedLeft(e,t){e.collapsedLeft=t,e.drawerModelShow=t,e.desktopModelShow=!t},triggerCollapsedRight(e,t){e.collapsedRight=t},updateUserinfo(e,t){e.userInfo=t,e.userInfo.id>0&&(e.userLogined=!0)},loadDefaultSiteProfile(e){e.profile.useFriendship="true".toLowerCase()==="true",e.profile.enableTrendsBar="false".toLowerCase()==="true",e.profile.enableWallet="false".toLocaleLowerCase()==="true",e.profile.allowTweetAttachment="true".toLowerCase()==="true",e.profile.allowTweetAttachmentPrice="false".toLowerCase()==="true",e.profile.allowTweetVideo="true".toLowerCase()==="true",e.profile.allowUserRegister="true".toLowerCase()==="true",e.profile.allowPhoneBind="true".toLowerCase()==="true",e.profile.defaultTweetMaxLength=2e3,e.profile.tweetWebEllipsisSize=400,e.profile.tweetMobileEllipsisSize=300,e.profile.defaultTweetVisibility="friend".toLowerCase(),e.profile.defaultMsgLoopInterval=5e3,e.profile.copyrightTop="2023 paopao.info",e.profile.copyrightLeft="Roc's Me",e.profile.copyrightLeftLink="",e.profile.copyrightRight="泡泡(PaoPao)开源社区",e.profile.copyrightRightLink="https://www.paopao.info"},updateSiteProfile(e,t){const r=e.profile;e.profile.useFriendship=t.use_friendship??r.useFriendship,e.profile.enableTrendsBar=t.enable_trends_bar??r.enableTrendsBar,e.profile.enableWallet=t.enable_wallet??r.enableWallet,e.profile.allowTweetAttachment=t.allow_tweet_attachment??r.allowTweetAttachment,e.profile.allowTweetAttachmentPrice=t.allow_tweet_attachment_price??r.allowTweetAttachmentPrice,e.profile.allowTweetVideo=t.allow_tweet_video??r.allowTweetVideo,e.profile.allowUserRegister=t.allow_user_register??r.allowUserRegister,e.profile.allowPhoneBind=t.allow_phone_bind??r.allowPhoneBind,e.profile.defaultTweetMaxLength=t.default_tweet_max_length??r.defaultTweetMaxLength,e.profile.tweetWebEllipsisSize=t.tweet_web_ellipsis_size??r.tweetWebEllipsisSize,e.profile.tweetMobileEllipsisSize=t.tweet_mobile_ellipsis_size??r.tweetMobileEllipsisSize,e.profile.defaultTweetVisibility=t.default_tweet_visibility??r.defaultTweetVisibility,e.profile.defaultMsgLoopInterval=t.default_msg_loop_interval??r.defaultMsgLoopInterval,e.profile.copyrightTop=t.copyright_top??r.copyrightTop,e.profile.copyrightLeft=t.copyright_left??r.copyrightLeft,e.profile.copyrightLeftLink=t.copyright_left_link??r.copyrightLeftLink,e.profile.copyrightRight=t.copyright_right??r.copyrightRight,e.profile.copyrightRightLink=t.copyright_right_link??r.copyrightRightLink},userLogout(e){localStorage.removeItem("PAOPAO_TOKEN"),e.userInfo={id:0,nickname:"",username:"",created_on:0,follows:0,followings:0,tweets_count:0,is_admin:!1},e.userLogined=!1}},actions:{},modules:{}}),Q=Pe.create({baseURL:"",timeout:3e4});Q.interceptors.request.use(e=>(localStorage.getItem("PAOPAO_TOKEN")&&(e.headers.Authorization="Bearer "+localStorage.getItem("PAOPAO_TOKEN")),e),e=>Promise.reject(e));Q.interceptors.response.use(e=>{const{data:t={},code:r=0}=(e==null?void 0:e.data)||{};if(+r==0)return t||{};Promise.reject((e==null?void 0:e.data)||{})},(e={})=>{var r;const{response:t={}}=e||{};return+(t==null?void 0:t.status)==401?(localStorage.removeItem("PAOPAO_TOKEN"),(t==null?void 0:t.data.code)!==10005?window.$message.warning((t==null?void 0:t.data.msg)||"鉴权失败"):window.$store.commit("triggerAuth",!0)):window.$message.error(((r=t==null?void 0:t.data)==null?void 0:r.msg)||"请求失败"),Promise.reject((t==null?void 0:t.data)||{})});function o(e){return Q(e)}const le=e=>o({method:"post",url:"/v1/auth/login",data:e}),ot=e=>o({method:"post",url:"/v1/auth/register",data:e}),Y=(e="")=>o({method:"get",url:"/v1/user/info",headers:{Authorization:`Bearer ${e}`}}),rt={class:"auth-wrap"},st={key:0},nt=F({__name:"auth",setup(e){const t=W(),r=P(!1),g=P(),a=X({username:"",password:""}),c=P(),i=X({username:"",password:"",repassword:""}),v={username:{required:!0,message:"请输入账户名"},password:{required:!0,message:"请输入密码"},repassword:[{required:!0,message:"请输入密码"},{validator:(w,s)=>!!i.password&&i.password.startsWith(s)&&i.password.length>=s.length,message:"两次密码输入不一致",trigger:"input"}]},f=w=>{var s;w.preventDefault(),w.stopPropagation(),(s=g.value)==null||s.validate(A=>{A||(r.value=!0,le({username:a.username,password:a.password}).then(m=>{const k=(m==null?void 0:m.token)||"";return localStorage.setItem("PAOPAO_TOKEN",k),Y(k)}).then(m=>{window.$message.success("登录成功"),r.value=!1,t.commit("updateUserinfo",m),t.commit("triggerAuth",!1),t.commit("refresh"),a.username="",a.password=""}).catch(m=>{r.value=!1}))})},L=w=>{var s;w.preventDefault(),w.stopPropagation(),(s=c.value)==null||s.validate(A=>{A||(r.value=!0,ot({username:i.username,password:i.password}).then(m=>le({username:i.username,password:i.password})).then(m=>{const k=(m==null?void 0:m.token)||"";return localStorage.setItem("PAOPAO_TOKEN",k),Y(k)}).then(m=>{window.$message.success("注册成功"),r.value=!1,t.commit("updateUserinfo",m),t.commit("triggerAuth",!1),i.username="",i.password="",i.repassword=""}).catch(m=>{r.value=!1}))})};return V(()=>{const w=localStorage.getItem("PAOPAO_TOKEN")||"";w?Y(w).then(s=>{t.commit("updateUserinfo",s),t.commit("triggerAuth",!1)}).catch(s=>{t.commit("userLogout")}):t.commit("userLogout")}),(w,s)=>{const A=Ae,m=Me,k=pe,l=de,h=Re,D=Ce,$=me,x=Ee,p=Oe,E=he,B=Se;return _(),z(B,{show:d(t).state.authModalShow,"onUpdate:show":s[7]||(s[7]=b=>d(t).state.authModalShow=b),class:"auth-card",preset:"card",size:"small","mask-closable":!1,bordered:!1,style:{width:"360px"}},{default:u(()=>[y("div",rt,[n(E,{bordered:!1},{default:u(()=>[d(t).state.profile.allowUserRegister?S("",!0):(_(),C("div",st,[n(k,{justify:"center"},{default:u(()=>[n(m,null,{default:u(()=>[n(A,{type:"success"},{default:u(()=>s[8]||(s[8]=[I("账号登录")])),_:1})]),_:1})]),_:1}),n(D,{ref_key:"loginRef",ref:g,model:a,rules:{username:{required:!0,message:"请输入账户名"},password:{required:!0,message:"请输入密码"}}},{default:u(()=>[n(h,{label:"账户",path:"username"},{default:u(()=>[n(l,{value:a.username,"onUpdate:value":s[0]||(s[0]=b=>a.username=b),placeholder:"请输入用户名",onKeyup:q(N(f,["prevent"]),["enter"])},null,8,["value","onKeyup"])]),_:1}),n(h,{label:"密码",path:"password"},{default:u(()=>[n(l,{type:"password","show-password-on":"mousedown",value:a.password,"onUpdate:value":s[1]||(s[1]=b=>a.password=b),placeholder:"请输入账户密码",onKeyup:q(N(f,["prevent"]),["enter"])},null,8,["value","onKeyup"])]),_:1})]),_:1},8,["model"]),n($,{type:"primary",block:"",secondary:"",strong:"",loading:r.value,onClick:f},{default:u(()=>s[9]||(s[9]=[I(" 登录 ")])),_:1},8,["loading"])])),d(t).state.profile.allowUserRegister?(_(),z(p,{key:1,"default-value":d(t).state.authModelTab,size:"large","justify-content":"space-evenly"},{default:u(()=>[n(x,{name:"signin",tab:"登录"},{default:u(()=>[n(D,{ref_key:"loginRef",ref:g,model:a,rules:{username:{required:!0,message:"请输入账户名"},password:{required:!0,message:"请输入密码"}}},{default:u(()=>[n(h,{label:"账户",path:"username"},{default:u(()=>[n(l,{value:a.username,"onUpdate:value":s[2]||(s[2]=b=>a.username=b),placeholder:"请输入用户名",onKeyup:q(N(f,["prevent"]),["enter"])},null,8,["value","onKeyup"])]),_:1}),n(h,{label:"密码",path:"password"},{default:u(()=>[n(l,{type:"password","show-password-on":"mousedown",value:a.password,"onUpdate:value":s[3]||(s[3]=b=>a.password=b),placeholder:"请输入账户密码",onKeyup:q(N(f,["prevent"]),["enter"])},null,8,["value","onKeyup"])]),_:1})]),_:1},8,["model"]),n($,{type:"primary",block:"",secondary:"",strong:"",loading:r.value,onClick:f},{default:u(()=>s[10]||(s[10]=[I(" 登录 ")])),_:1},8,["loading"])]),_:1}),n(x,{name:"signup",tab:"注册"},{default:u(()=>[n(D,{ref_key:"registerRef",ref:c,model:i,rules:v},{default:u(()=>[n(h,{label:"用户名",path:"username"},{default:u(()=>[n(l,{value:i.username,"onUpdate:value":s[4]||(s[4]=b=>i.username=b),placeholder:"用户名注册后无法修改"},null,8,["value"])]),_:1}),n(h,{label:"密码",path:"password"},{default:u(()=>[n(l,{type:"password","show-password-on":"mousedown",placeholder:"密码不少于6位",value:i.password,"onUpdate:value":s[5]||(s[5]=b=>i.password=b),onKeyup:q(N(L,["prevent"]),["enter"])},null,8,["value","onKeyup"])]),_:1}),n(h,{label:"重复密码",path:"repassword"},{default:u(()=>[n(l,{type:"password","show-password-on":"mousedown",placeholder:"请再次输入密码",value:i.repassword,"onUpdate:value":s[6]||(s[6]=b=>i.repassword=b),onKeyup:q(N(L,["prevent"]),["enter"])},null,8,["value","onKeyup"])]),_:1})]),_:1},8,["model"]),n($,{type:"primary",block:"",secondary:"",strong:"",loading:r.value,onClick:L},{default:u(()=>s[11]||(s[11]=[I(" 注册 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["default-value"])):S("",!0)]),_:1})])]),_:1},8,["show"])}}}),_e=(e,t)=>{const r=e.__vccOpts||e;for(const[g,a]of t)r[g]=a;return r},at=_e(nt,[["__scopeId","data-v-6f778fc4"]]),no=e=>o({method:"get",url:"/v1/posts",params:e}),lt=e=>o({method:"get",url:"/v1/tags",params:e}),ao=e=>o({method:"get",url:"/v1/post",params:e}),lo=e=>o({method:"get",url:"/v1/post/star",params:e}),io=e=>o({method:"post",url:"/v1/post/star",data:e}),uo=e=>o({method:"get",url:"/v1/post/collection",params:e}),co=e=>o({method:"post",url:"/v1/post/collection",data:e}),po=e=>o({method:"get",url:"/v1/post/comments",params:e}),mo=e=>o({method:"get",url:"/v1/user/contacts",params:e}),ho=e=>o({method:"get",url:"/v1/trends/index",params:e}),fo=e=>o({method:"post",url:"/v1/post",data:e}),_o=e=>o({method:"delete",url:"/v1/post",data:e}),go=e=>o({method:"post",url:"/v1/post/lock",data:e}),wo=e=>o({method:"post",url:"/v1/post/stick",data:e}),vo=e=>o({method:"post",url:"/v1/post/highlight",data:e}),yo=e=>o({method:"post",url:"/v1/post/visibility",data:e}),bo=e=>o({method:"post",url:"/v1/tweet/comment/thumbsup",data:e}),ko=e=>o({method:"post",url:"/v1/tweet/comment/thumbsdown",data:e}),Lo=e=>o({method:"post",url:"/v1/tweet/reply/thumbsup",data:e}),To=e=>o({method:"post",url:"/v1/tweet/reply/thumbsdown",data:e}),Po=e=>o({method:"post",url:"/v1/post/comment",data:e}),Ao=e=>o({method:"delete",url:"/v1/post/comment",data:e}),Mo=e=>o({method:"post",url:"/v1/post/comment/highlight",data:e}),Ro=e=>o({method:"post",url:"/v1/post/comment/reply",data:e}),Co=e=>o({method:"delete",url:"/v1/post/comment/reply",data:e}),Eo=e=>o({method:"post",url:"/v1/topic/stick",data:e}),Oo=e=>o({method:"post",url:"/v1/topic/pin",data:e}),So=e=>o({method:"post",url:"/v1/topic/follow",data:e}),Io=e=>o({method:"post",url:"/v1/topic/unfollow",data:e}),Uo=(e={})=>o({method:"get",url:"/v1/captcha",params:e}),$o=e=>o({method:"post",url:"/v1/captcha",data:e}),Do=e=>o({method:"post",url:"/v1/user/whisper",data:e}),xo=e=>o({method:"post",url:"/v1/friend/requesting",data:e}),qo=e=>o({method:"post",url:"/v1/friend/add",data:e}),No=e=>o({method:"post",url:"/v1/user/follow",data:e}),zo=e=>o({method:"post",url:"/v1/user/unfollow",data:e}),Ko=e=>o({method:"get",url:"/v1/user/follows",params:e}),Fo=e=>o({method:"get",url:"/v1/user/followings",params:e}),Vo=e=>o({method:"post",url:"/v1/friend/reject",data:e}),Wo=e=>o({method:"post",url:"/v1/friend/delete",data:e}),Bo=e=>o({method:"post",url:"/v1/user/phone",data:e}),Ho=e=>o({method:"post",url:"/v1/user/activate",data:e}),Yo=e=>o({method:"post",url:"/v1/user/password",data:e}),jo=e=>o({method:"post",url:"/v1/user/nickname",data:e}),Go=e=>o({method:"post",url:"/v1/user/avatar",data:e}),ie=(e={})=>o({method:"get",url:"/v1/user/msgcount/unread",params:e}),Qo=e=>o({method:"get",url:"/v1/user/messages",params:e}),Zo=e=>o({method:"post",url:"/v1/user/message/read",data:e}),Jo=()=>o({method:"post",url:"/v1/user/message/readall"}),Xo=e=>o({method:"get",url:"/v1/user/collections",params:e}),er=e=>o({method:"get",url:"/v1/user/profile",params:e}),tr=e=>o({method:"get",url:"/v1/user/posts",params:e}),or=e=>o({method:"get",url:"/v1/user/wallet/bills",params:e}),rr=e=>o({method:"post",url:"/v1/user/recharge",data:e}),sr=e=>o({method:"get",url:"/v1/user/recharge",params:e}),nr=e=>o({method:"get",url:"/v1/suggest/users",params:e}),ar=e=>o({method:"get",url:"/v1/suggest/tags",params:e}),lr=e=>o({method:"get",url:"/v1/attachment/precheck",params:e}),ir=e=>o({method:"get",url:"/v1/attachment",params:e}),ur=e=>o({method:"post",url:"/v1/admin/user/status",data:e}),it=()=>o({method:"get",url:"/v1/admin/site/status"});U.locale("zh-cn");const ut=e=>U.unix(e).fromNow(),cr=e=>{let t=U.unix(e),r=U();return t.year()!=r.year()?t.utc(!0).format("YYYY-MM-DD HH:mm"):U().diff(t,"month")>3?t.utc(!0).format("MM-DD HH:mm"):t.fromNow()},pr=e=>{let t=U.unix(e),r=U();return t.year()!=r.year()?t.utc(!0).format("YYYY-MM-DD"):U().diff(t,"month")>3?t.utc(!0).format("MM-DD"):t.fromNow()},dr=e=>U.unix(e).utc(!0).format("YYYY年MM月"),ct={key:0,class:"rightbar-wrap"},pt={class:"search-wrap"},dt={class:"post-num"},mt={class:"post-num"},ht={class:"copyright"},ft=["href"],_t=["href"],gt={class:"site-info-item"},wt=F({__name:"rightbar",setup(e){const t=P([]),r=P([]),g=P(!1),a=P(""),c=W(),i=ce(),v=P(0),f=P(0),L=P(0),w=P(0),s=P(null),A=6,m=12,k=()=>{it().then(p=>{v.value=p.register_user_count,f.value=p.online_user_count,L.value=p.history_max_online,w.value=p.server_up_time}).catch(p=>{}),x.disconnect()},l=()=>{g.value=!0,lt({type:"hot_extral",num:m,extral_num:A}).then(p=>{t.value=p.topics,r.value=p.extral_topics??[],$.value=!0,g.value=!1}).catch(p=>{g.value=!1})},h=p=>p>=1e3?(p/1e3).toFixed(1)+"k":p,D=()=>{i.push({name:"home",query:{q:a.value}})},$=G({get:()=>c.state.userLogined&&r.value.length!==0,set:p=>{}});j(()=>({refreshTopicFollow:c.state.refreshTopicFollow,userLogined:c.state.userLogined}),(p,E)=>{(p.refreshTopicFollow!==E.refreshTopicFollow||p.userLogined)&&l(),c.state.userInfo.is_admin&&k()});const x=new IntersectionObserver(p=>{p.forEach(E=>{E.isIntersecting&&k()})},{root:null,rootMargin:"0px",threshold:1});return V(()=>{s.value&&x.observe(s.value),l()}),(p,E)=>{const B=K,b=de,Z=ue("router-link"),J=Ie,H=he,ge=pe;return d(c).state.collapsedRight?S("",!0):(_(),C("div",ct,[y("div",pt,[n(b,{round:"",clearable:"",placeholder:"搜一搜...",value:a.value,"onUpdate:value":E[0]||(E[0]=O=>a.value=O),onKeyup:q(N(D,["prevent"]),["enter"])},{prefix:u(()=>[n(B,{component:d(We)},null,8,["component"])]),_:1},8,["value","onKeyup"])]),$.value?(_(),z(H,{key:0,class:"hottopic-wrap",title:"关注话题",embedded:"",bordered:!1,size:"small"},{default:u(()=>[n(J,{show:g.value},{default:u(()=>[(_(!0),C(ee,null,te(r.value,O=>(_(),C("div",{class:"hot-tag-item",key:O.id},[n(Z,{class:"hash-link",to:{name:"home",query:{q:O.tag,t:"tag"}}},{default:u(()=>[I(" #"+R(O.tag),1)]),_:2},1032,["to"]),y("div",dt,R(h(O.quote_num)),1)]))),128))]),_:1},8,["show"])]),_:1})):S("",!0),n(H,{class:"hottopic-wrap",title:"热门话题",embedded:"",bordered:!1,size:"small"},{default:u(()=>[n(J,{show:g.value},{default:u(()=>[(_(!0),C(ee,null,te(t.value,O=>(_(),C("div",{class:"hot-tag-item",key:O.id},[n(Z,{class:"hash-link",to:{name:"home",query:{q:O.tag,t:"tag"}}},{default:u(()=>[I(" #"+R(O.tag),1)]),_:2},1032,["to"]),y("div",mt,R(h(O.quote_num)),1)]))),128))]),_:1},8,["show"])]),_:1}),n(H,{class:"copyright-wrap",embedded:"",bordered:!1,size:"small"},{default:u(()=>[y("div",ht,"© "+R(d(c).state.profile.copyrightTop),1),y("div",null,[n(ge,null,{default:u(()=>[y("a",{href:d(c).state.profile.copyrightLeftLink,target:"_blank",class:"hash-link"},R(d(c).state.profile.copyrightLeft),9,ft),y("a",{href:d(c).state.profile.copyrightRightLink,target:"_blank",class:"hash-link"},R(d(c).state.profile.copyrightRight),9,_t)]),_:1})])]),_:1}),d(c).state.userInfo.is_admin?(_(),C("div",{key:1,class:"site-info",ref_key:"userInfoElement",ref:s},[y("span",gt,R(v.value)+" 注册用户，"+R(f.value)+" 人在线，最高在线 "+R(L.value)+" 人，站点上线于 "+R(d(ut)(w.value)),1)],512)):S("",!0)]))}}}),vt=_e(wt,[["__scopeId","data-v-181f8063"]]),yt="/assets/logo-wT_OfKx5.png",bt={class:"sidebar-wrap"},kt={class:"logo-wrap"},Lt={key:0,class:"user-wrap"},Tt={class:"user-info"},Pt={class:"nickname"},At={class:"nickname-txt"},Mt={class:"username"},Rt={class:"user-mini-wrap"},Ct={key:1,class:"user-wrap"},Et={key:0,class:"login-only-wrap"},Ot={key:1,class:"login-wrap"},St=F({__name:"sidebar",setup(e){const t=W(),r=Le(),g=ce(),a=P(!1),c=P(r.name||""),i=P(),v="false".toLowerCase()==="true";j(r,()=>{c.value=r.name}),j(t.state,()=>{a.value=t.state.unreadMsgCount>0,t.state.userInfo.id>0?i.value||(ie().then(l=>{a.value=l.count>0,t.commit("updateUnreadMsgCount",l.count)}).catch(l=>{console.log(l)}),i.value=setInterval(()=>{ie().then(l=>{a.value=l.count>0,t.commit("updateUnreadMsgCount",l.count)}).catch(l=>{console.log(l)})},t.state.profile.defaultMsgLoopInterval)):i.value&&clearInterval(i.value)}),V(()=>{window.onresize=()=>{t.commit("triggerCollapsedLeft",document.body.clientWidth<=821),t.commit("triggerCollapsedRight",document.body.clientWidth<=821)}});const f=G(()=>{const l=[{label:"广场",key:"home",icon:()=>T(re),href:"/"},{label:"话题",key:"topic",icon:()=>T(se),href:"/topic"}];return v&&l.push({label:"公告",key:"anouncement",icon:()=>T(Be),href:"/anouncement"}),l.push({label:"主页",key:"profile",icon:()=>T(He),href:"/profile"}),l.push({label:"消息",key:"messages",icon:()=>T(Ye),href:"/messages"}),l.push({label:"收藏",key:"collection",icon:()=>T(je),href:"/collection"}),t.state.profile.useFriendship&&l.push({label:"好友",key:"contacts",icon:()=>T(Ge),href:"/contacts"}),t.state.profile.enableWallet&&l.push({label:"钱包",key:"wallet",icon:()=>T(Qe),href:"/wallet"}),l.push({label:"设置",key:"setting",icon:()=>T(Ze),href:"/setting"}),t.state.userInfo.id>0?l:[{label:"广场",key:"home",icon:()=>T(re),href:"/"},{label:"话题",key:"topic",icon:()=>T(se),href:"/topic"}]}),L=l=>"href"in l?T("div",{},l.label):l.label,w=l=>l.key==="messages"?T($e,{dot:!0,show:a.value,processing:!0},{default:()=>T(K,{color:l.key===c.value?"var(--n-item-icon-color-active)":"var(--n-item-icon-color)"},{default:l.icon})}):T(K,null,{default:l.icon}),s=(l,h={})=>{c.value=l,g.push({name:l,query:{t:new Date().getTime()}})},A=()=>{r.path==="/"&&t.commit("refresh"),s("home")},m=l=>{t.commit("triggerAuth",!0),t.commit("triggerAuthKey",l)},k=()=>{t.commit("userLogout"),t.commit("refresh"),A()};return window.$store=t,window.$message=Ue(),(l,h)=>{const D=De,$=xe,x=qe,p=me;return _(),C("div",bt,[y("div",kt,[n(D,{class:"logo-img",width:"36",src:d(yt),"preview-disabled":!0,onClick:A},null,8,["src"])]),n($,{accordion:!0,"icon-size":24,options:f.value,"render-label":L,"render-icon":w,value:c.value,"onUpdate:value":s},null,8,["options","value"]),d(t).state.userInfo.id>0?(_(),C("div",Lt,[n(x,{class:"user-avatar",round:"",size:34,src:d(t).state.userInfo.avatar},null,8,["src"]),y("div",Tt,[y("div",Pt,[y("span",At,R(d(t).state.userInfo.nickname),1),n(p,{class:"logout",quaternary:"",circle:"",size:"tiny",onClick:k},{icon:u(()=>[n(d(K),null,{default:u(()=>[n(d(ne))]),_:1})]),_:1})]),y("div",Mt,"@"+R(d(t).state.userInfo.username),1)]),y("div",Rt,[n(p,{class:"logout",quaternary:"",circle:"",onClick:k},{icon:u(()=>[n(d(K),{size:24},{default:u(()=>[n(d(ne))]),_:1})]),_:1})])])):(_(),C("div",Ct,[d(t).state.profile.allowUserRegister?S("",!0):(_(),C("div",Et,[n(p,{strong:"",secondary:"",round:"",type:"primary",onClick:h[0]||(h[0]=E=>m("signin"))},{default:u(()=>h[3]||(h[3]=[I(" 登录 ")])),_:1})])),d(t).state.profile.allowUserRegister?(_(),C("div",Ot,[n(p,{strong:"",secondary:"",round:"",type:"primary",onClick:h[1]||(h[1]=E=>m("signin"))},{default:u(()=>h[4]||(h[4]=[I(" 登录 ")])),_:1}),n(p,{strong:"",secondary:"",round:"",type:"info",onClick:h[2]||(h[2]=E=>m("signup"))},{default:u(()=>h[5]||(h[5]=[I(" 注册 ")])),_:1})])):S("",!0)]))])}}}),It=()=>o({method:"get",url:"/v1/site/profile"}),Ut={"has-sider":"",class:"main-wrap",position:"static"},$t={key:0},Dt={class:"content-wrap"},xt=F({__name:"App",setup(e){const t=W(),r=G(()=>t.state.theme==="dark"?ze:null);function g(){t.commit("loadDefaultSiteProfile"),"true".toLowerCase()==="true"&&It().then(a=>{t.commit("updateSiteProfile",a)}).catch(a=>{console.log(a)})}return V(()=>{g()}),(a,c)=>{const i=St,v=ue("router-view"),f=vt,L=at,w=Ke,s=Fe,A=Ve,m=Ne;return _(),z(m,{theme:r.value},{default:u(()=>[n(s,null,{default:u(()=>[n(w,null,{default:u(()=>{var k;return[y("div",{class:ve(["app-container",{dark:((k=r.value)==null?void 0:k.name)==="dark",mobile:!d(t).state.desktopModelShow}])},[y("div",Ut,[d(t).state.desktopModelShow?(_(),C("div",$t,[n(i)])):S("",!0),y("div",Dt,[n(v,{class:"app-wrap"},{default:u(({Component:l})=>[(_(),z(we,null,[a.$route.meta.keepAlive?(_(),z(oe(l),{key:0})):S("",!0)],1024)),a.$route.meta.keepAlive?S("",!0):(_(),z(oe(l),{key:0}))]),_:1})]),n(f)]),n(L)],2)]}),_:1})]),_:1}),n(A)]),_:1},8,["theme"])}}});ye(xt).use(fe).use(tt).mount("#app");export{Fo as $,io as A,co as B,ao as C,po as D,yt as E,Eo as F,Oo as G,Io as H,So as I,lt as J,ut as K,dr as L,er as M,ur as N,xo as O,qo as P,Vo as Q,Zo as R,Qo as S,Jo as T,Xo as U,pr as V,lr as W,ir as X,mo as Y,Ko as Z,_e as _,ar as a,Do as a0,Y as a1,or as a2,rr as a3,sr as a4,Uo as a5,Go as a6,Yo as a7,Bo as a8,Ho as a9,jo as aa,$o as ab,St as ac,ho as b,fo as c,no as d,tr as e,No as f,nr as g,Wo as h,cr as i,To as j,Co as k,bo as l,ko as m,Ro as n,Ao as o,Mo as p,Po as q,lo as r,uo as s,Lo as t,zo as u,_o as v,go as w,wo as x,vo as y,yo as z};

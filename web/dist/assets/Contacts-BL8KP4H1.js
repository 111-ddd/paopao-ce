import{_ as G}from"./whisper-CD0RDnNY.js";import{d as S,c as H,l as L,f as p,j as s,q as t,w as o,k as a,bq as g,A as O,G as R,z as d,h as B,r,b as W,t as C,Y as b,F as I,x as E}from"./@vue-9sINKCPW.js";import{L as J,_ as N,Y as Q}from"./index-DxHQoSDp.js";import{M as U,Q as K,B as X,i as M,m as Z,G as ee,a as te,J as ne,j as oe,H as se}from"./naive-ui-BJojRuLw.js";import{q as ae,r as ce}from"./@vicons-PCg97L0F.js";import{_ as ie}from"./post-skeleton-B6KFVL2X.js";import{_ as re}from"./main-nav.vue_vue_type_style_index_0_lang-D7-FAbTY.js";import{Y as le}from"./v3-infinite-loading-D3303HHP.js";import{b as _e}from"./vue-router-yrkFRUM9.js";import"./vuex--ttreJMD.js";import"./axios-t--hEgTQ.js";import"./moment-P60zs0je.js";/* empty css               */import"./seemly-D-teBmey.js";import"./vueuc-DrMWnH2h.js";import"./evtd-CI_DDEu_.js";import"./@css-render-DN2R7sM6.js";import"./vooks-CfQnrjIt.js";import"./vdirs-DRH9Xvnd.js";import"./@juggle-C8OzoCMD.js";import"./css-render-BDrvWz3H.js";import"./@emotion-WldOFDRm.js";import"./lodash-es-TJvrUncL.js";import"./treemate-HRdUPn5m.js";import"./async-validator-9PlIezaS.js";import"./date-fns-Db9XENWt.js";const ue={class:"contact-item"},pe={class:"nickname-wrap"},me={class:"username-wrap"},de={class:"user-info"},fe={class:"info-item"},ve={class:"info-item"},he={class:"item-header-extra"},ge=S({__name:"contact-item",props:{contact:{}},emits:["send-whisper"],setup(z,{emit:w}){const _=w,l=e=>()=>B(M,null,{default:()=>B(e)}),n=z,c=H(()=>[{label:"私信 @"+n.contact.username,key:"whisper",icon:l(ce)}]),m=e=>{switch(e){case"whisper":const i={id:n.contact.user_id,avatar:n.contact.avatar,username:n.contact.username,nickname:n.contact.nickname,is_admin:!1,is_friend:!0,is_following:!1,created_on:0,follows:0,followings:0,status:1};_("send-whisper",i);break}};return(e,i)=>{const f=Z,k=L("router-link"),y=X,$=K,v=U;return s(),p("div",ue,[t(v,{"content-indented":""},{avatar:o(()=>[t(f,{size:54,src:e.contact.avatar},null,8,["src"])]),header:o(()=>[a("span",pe,[t(k,{onClick:i[0]||(i[0]=O(()=>{},["stop"])),class:"username-link",to:{name:"user",query:{s:e.contact.username}}},{default:o(()=>[R(d(e.contact.nickname),1)]),_:1},8,["to"])]),a("span",me," @"+d(e.contact.username),1),a("div",de,[a("span",fe," UID. "+d(e.contact.user_id),1),a("span",ve,d(g(J)(e.contact.created_on))+" 加入 ",1)])]),"header-extra":o(()=>[a("div",he,[t($,{placement:"bottom-end",trigger:"click",size:"small",options:c.value,onSelect:m},{default:o(()=>[t(y,{quaternary:"",circle:""},{icon:o(()=>[t(g(M),null,{default:o(()=>[t(g(ae))]),_:1})]),_:1})]),_:1},8,["options"])])]),_:1})])}}}),we=N(ge,[["__scopeId","data-v-42e975ce"]]),ke={key:0,class:"skeleton-wrap"},ye={key:1},$e={key:0,class:"empty-wrap"},Ce={class:"load-more-wrap"},be={class:"load-more-spinner"},ze=S({__name:"Contacts",setup(z){const w=_e(),_=r(!1),l=r(!1),n=r([]),c=r(+w.query.p||1),m=r(20),e=r(0),i=r(!1),f=r({id:0,avatar:"",username:"",nickname:"",is_admin:!1,is_friend:!0,is_following:!1,created_on:0,follows:0,followings:0,status:1}),k=h=>{f.value=h,i.value=!0},y=()=>{i.value=!1},$=()=>{c.value<e.value||e.value==0?(l.value=!1,c.value++,v()):l.value=!0};W(()=>{v()});const v=(h=!1)=>{n.value.length===0&&(_.value=!0),Q({page:c.value,page_size:m.value}).then(u=>{_.value=!1,u.list.length===0&&(l.value=!0),c.value>1?n.value=n.value.concat(u.list):(n.value=u.list,h&&setTimeout(()=>{window.scrollTo(0,99999)},50)),e.value=Math.ceil(u.pager.total_rows/m.value)}).catch(u=>{_.value=!1,c.value>1&&c.value--})};return(h,u)=>{const x=re,P=ie,V=ne,j=we,D=se,F=G,T=ee,Y=oe,A=te;return s(),p(I,null,[a("div",null,[t(x,{title:"好友"}),t(T,{class:"main-content-wrap",bordered:""},{default:o(()=>[_.value&&n.value.length===0?(s(),p("div",ke,[t(P,{num:m.value},null,8,["num"])])):(s(),p("div",ye,[n.value.length===0?(s(),p("div",$e,[t(V,{size:"large",description:"暂无数据"})])):b("",!0),(s(!0),p(I,null,E(n.value,q=>(s(),C(D,{class:"list-item",key:q.user_id},{default:o(()=>[t(j,{contact:q,onSendWhisper:k},null,8,["contact"])]),_:2},1024))),128))])),t(F,{show:i.value,user:f.value,onSuccess:y},null,8,["show","user"])]),_:1})]),e.value>0?(s(),C(A,{key:0,justify:"center"},{default:o(()=>[t(g(le),{class:"load-more",slots:{complete:"没有更多好友了",error:"加载出错"},onInfinite:$},{spinner:o(()=>[a("div",Ce,[l.value?b("",!0):(s(),C(Y,{key:0,size:14})),a("span",be,d(l.value?"没有更多好友了":"加载更多"),1)])]),_:1})]),_:1})):b("",!0)],64)}}}),Xe=N(ze,[["__scopeId","data-v-69277f0c"]]);export{Xe as default};
